
# HG changeset patch
# User Daiki Ueno <dueno@redhat.com>
# Date 1505742679 -7200
# Node ID 70109a01ce53328b511aaa6c839593a3282cb725
# Parent  279b257c6433f1972d49c529247e6ed2633b979f
Bug 1395495, bustage fix, Don't use the modu function from cert.sh, r=kaie

diff --git a/tests/tools/tools.sh b/tests/tools/tools.sh
--- a/tests/tools/tools.sh
+++ b/tests/tools/tools.sh
@@ -496,17 +496,19 @@ SIGNSCRIPT
   html_msg $? 0 "Show who signed xpi (signtool -w)"
 
 }
 
 tools_modutil()
 {
   echo "$SCRIPTNAME: Test if DB created by modutil -create is initialized"
   mkdir -p ${R_TOOLSDIR}/moddir
-  modu -create -dbdir "${R_TOOLSDIR}/moddir" 2>&1
+  # copied from modu function in cert.sh
+  # echo is used to press Enter expected by modutil
+  echo | ${BINDIR}/modutil -create -dbdir "${R_TOOLSDIR}/moddir" 2>&1
   ret=$?
   ${BINDIR}/certutil -S -s 'CN=TestUser' -d "${TOOLSDIR}/moddir" -n TestUser \
 	   -x -t ',,' -z "${R_NOISE_FILE}"
   ret=$?
   html_msg $ret 0 "Test if DB created by modutil -create is initialized"
   check_tmpfile
 }
 

